<?xml version="1.0" encoding="utf-8"?>
<SingleTile>
    <StateTypes>
        <BaseStates> <!-- States that can be used on the 1st tile.-->
            <State Label="SA"> 
                <color>323031</color>
            </State>
            <State Label="SB"> 
                <color>323031</color>
            </State>
            <State Label="0B">
                <color>3f88c5</color>
            </State>        
            <State Label="1B">
                <color>3f88c5</color>
            </State>
            <State Label="2B">
                <color>3f88c5</color>
            </State>
            <State Label="A">
                <color>f03A47</color>
            </State>
        </BaseStates>
        <TransitionStates> <!-- States that can't be used on the 1st tile -->
            <State Label="0A">
                <color>f03A47</color>
            </State>
            <State Label="1A">
                <color>f03A47</color>
            </State>
            <State Label="2A">
                <color>f03A47</color>
            </State>
            <State Label="0A'">
                <color>f03A47</color>
            </State>        
            <State Label="1A'">
                <color>f03A47</color>
            </State>
            <State Label="2A'">
                <color>f03A47</color>
            </State>       
            <State Label="2B'">
                <color>3f88c5</color>
            </State>
            <State Label="2B*">
                <color>3f88c5</color>
            </State>
            <State Label="0">
                <color>dfe0e2</color>
            </State>
            <State Label="1">
                <color>dfe0e2</color>
            </State>            
        </TransitionStates>
    </StateTypes>
    <System>
        <AffinityRules>
            <Rule State="SA">
                <right>"SB"</right>
            </Rule>
            <Rule State="SB">
                <left>"SA"</left>
                <up>"0B"</up>
            </Rule>
            <Rule State="0B">
                <down>"SB"</down>
                <down>"2B'"</down>
                <up>"1B"</up>
                <left>"A"</left>
            </Rule>
            <Rule State="1B">
                <down>"0B"</down>
                <up>"2B"</up>
                <left>"A"</left>
            </Rule>
            <Rule State="2B">
                <down>"1B"</down>
                <left>"A"</left>
            </Rule>
            <Rule State="2B'">
                <up>"0B"</up>
                <down>"1B"</down>
                <left>"A"</left>
            </Rule>
            <Rule State="A">
                <right>"B0"</right>
                <right>"B1'"</right>
                <right>"B2'"</right>
            </Rule>
        </AffinityRules>
        <TransitionRules>
            <Rule State="A">
                <down Neighbor="SA" finalOrigin="0A'" finalNeighbor="SA">
                </down>
                <down Neighbor="0A" finalOrigin="1A'" finalNeighbor="0A">
                </down>
                <down Neighbor="1A" finalOrigin="2A'" finalNeighbor="1A">
                </down>
                <down Neighbor="0A'" finalOrigin="0A'" finalNeighbor="0A'">
                </down>
                <down Neighbor="1A'" finalOrigin="1A'" finalNeighbor="1A'">
                </down>
                <down Neighbor="2A'" finalOrigin="2A'" finalNeighbor="2A'">
                </down>                                   
            </Rule>
            <Rule State="0A'">
                <up Neighbor="0A" finalOrigin="0A" finalNeighbor="0A">
                </up>
                <right Neighbor="2B" finalOrigin="0A" finalNeighbor="2B">
                </right>
            </Rule>
            <Rule State="1A'">
                <up Neighbor="1A" finalOrigin="1A" finalNeighbor="1A">
                </up>  
                <right Neighbor="2B" finalOrigin="1A" finalNeighbor="2B">
                </right>                                 
            </Rule>
            <Rule State="2A'">
                <up Neighbor="2A" finalOrigin="2A" finalNeighbor="2A">
                </up>
                <right Neighbor="2B" finalOrigin="2A" finalNeighbor="2B">
                </right>                               
            </Rule>
            <Rule State="2B'">
                <up Neighbor="0B" finalOrigin="2B*" finalNeighbor="0B">
                </up>                            
            </Rule>
            <Rule State="2B">
                <left Neighbor="0A" finalOrigin="2B'" finalNeighbor="0A">
                </left>
                <left Neighbor="1A" finalOrigin="2B'" finalNeighbor="1A">
                </left>                          
            </Rule>
            <!-- String Encoding -->
            <Rule State="0A">
                <right Neighbor="0B" finalOrigin="0A" finalNeighbor="0">
                </right>
                <right Neighbor="1B" finalOrigin="0A" finalNeighbor="1">
                </right>
                <right Neighbor="2B*" finalOrigin="0A" finalNeighbor="0">
                </right>                                 
            </Rule>
            <Rule State="1A">
                <right Neighbor="0B" finalOrigin="1A" finalNeighbor="1">
                </right>
                <right Neighbor="1B" finalOrigin="1A" finalNeighbor="0">
                </right>
                <right Neighbor="2B*" finalOrigin="1A" finalNeighbor="1">
                </right>                                 
            </Rule>    
            <Rule State="2A">
                <right Neighbor="0B" finalOrigin="2A" finalNeighbor="0">
                </right>
                <right Neighbor="1B" finalOrigin="2A" finalNeighbor="1">
                </right>
                <right Neighbor="2B" finalOrigin="2A" finalNeighbor="1">
                </right>                                 
            </Rule>      
        </TransitionRules>
    </System>
</SingleTile>
